<template name="integrations">

  <div class="listings-heading">
    <h1>Integrations</h1>
    <div class="btn-holder">
      <button id="add-integration" data-target="#modal-add-integration"  data-toggle="modal"  class="btn shadowed btn-custom-darken">
        <span class="glyphicon glyphicon-plus"></span>
        Connect New Account
      </button>
    </div>
  </div>
  <div class="clear"></div>

  <table class="table" width="100%">
    <thead>
      <tr>
        <th class="th-width-auto">Account Name</th>
        <th align="center">Integrations</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#each UserIntegration}}
      <tr>
        <td>{{connectedName}} <!-- 's {{userServiceName serviceId}} Account --></td>
        <td align="center"> - </td>
        <td align="center">

          <button class="btn btn-default btn-sm api-validator" id="{{serviceId}}">
            <span class="glyphicon {{getValiditySign accessTokenValid}}"></span>
            Test
          </button>

          <button class="btn btn-default btn-sm connected-account-rename" id="{{_id}}">
            <span class="glyphicon glyphicon-pencil"></span>
            Rename
          </button>

          <button class="btn btn-default btn-sm  {{getAuthTypeClass serviceId}}" id="{{serviceId}}">
            <span class="glyphicon glyphicon-refresh"></span>
            Reconnect
          </button>

          <button class="btn btn-default btn-sm connected-account-disconnect"  id="{{_id}}">
            <span class="glyphicon glyphicon-trash"></span>
            {{getDisconnectionStatus disconnected}}
          </button>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <!-- Modal For New Integration -->

  <div class="modal fade" id="modal-add-integration" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel"> Select an Account </h4>
        </div>
        <div class="modal-body">
          {{> servicesList}}
        </div>
        <div class="modal-footer">
          <p>Looking for an account that is not in the list? <a href="#"> Suggest an Account</a></p>
        </div>
      </div>
    </div>
  </div>

<!-- OAUTH POPUP STARTS -->

  <div class="modal fade" id="OauthNameModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="connectedAccountName"> Enter The Details </h4>
        </div>
        <div class="modal-body" id="OauthConnectedAccountId">
          <div class="">Name this connected account on ZZ(required)</div>
          <p>Example: "Mike's {{ConnectedServiceName}} Account".</p>
          <div><input type="text" id='connected_mail' style="width:80%;" value="{{currentUser.profile.name}}'s {{ConnectedServiceName}} Account"></div>
          <div>
            <button class="btn btn-default" id="OAuthAuthentication">Continue</button>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- OAUTH POPUP ENDS -->


  <!-- BASIC AUTH POPUP CODE STARTS HERE -->
  <div class="btn-holder" style="display:none;">
    <button id="validate-basic-auth" data-target="#modal-add-basic-auth-integration"  data-toggle="modal" class="btn shadowed btn-custom-darken">
      <!-- <span class="glyphicon glyphicon-plus"></span> -->
      Bacis Authentication
    </button>
  </div>

  <div class="modal fade" id="modal-add-basic-auth-integration" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel"> Enter The Details </h4>
        </div>
        <div class="modal-body" id="connected-account-id">
          <div class="">Name this connected account on ZZ(required)</div>
          <p>Example: "Mike's {{ConnectedServiceName}} Account".</p>
          <div><input type="text" id='connected_name' style="width:80%;" value="{{currentUser.profile.name}}'s {{ConnectedServiceName}} Account"></div>
          <div class="account_sid">Account SID(required)</div>
          <input type="text" id="account_sid" style="width:80%;">
          <div class="auth_token">Auth Token</div>
          <input type="text" id="auth_token" style="width:80%;"><div></div>
          <div>
            <button class="btn-holer" id="basci-auth-authentication">Continue</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- BASIC AUTH POPUP CODE ENDS HERE -->


  <!-- CONNECTED ACCOUNT RENAME CODE STARTS HERE -->

  <div class="modal fade" id="modal-connected-account-rename" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel"> Enter The Details </h4>
        </div>
        <div class="modal-body" id="connected-account-id">
          <div class="">Name this connected account on ZZ(required)</div>
          <p>Example: "Mike's {{ConnectedServiceName}} Account".</p>
          <div><input type="text" id='connected-mail-rename' style="width:80%;" value ="{{ConnectedName}}"></div>
          <div>
            <button class="btn-holer connected-account-rename-update" id="{{RenameConnectedAccountId}}">Continue</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- CONNECTED ACCOUNT RENAME CODE ENDS HERE -->

<!-- CONNECTED ACCOUNT RECONNECT CODE STARTS HERE -->

  <div class="modal fade" id="modal-connected-account-reconnect" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel"> Enter The Details </h4>
          </div>
          <div class="modal-body" id="reconnect-account-id">
            <div class="">Name this connected account on ZZ(required)</div>
            <p>Example: "Mike's {{ConnectedServiceName}} Account".</p>
            <div><input type="text" id="reconnect-connected-name" style="width:80%;" value="{{ReconnectConnectedName}}"></div>
            <div class="account_sid">Account SID(required)</div>
            <input type="text" id="reconnect-account-sid" value="{{ReconnectAccountSId}}" style="width:80%;">
            <div class="auth_token">Auth Token</div>
            <input type="text" id="reconnect-auth-token" value="{{ReconnectAccessToken}}" style="width:80%;"><div></div>
            <div>
              <button class="btn-holer" id="authenticate-reconnect">Continue</button>
            </div>
          </div>
      </div>
    </div>
  </div>
<!-- CONNECTED ACCOUNT RECONNECT CODE ENDS HERE -->

</template>

<template name="servicesList">
  <div class="row clearfix">
    {{#each services}}
    <div class="col-md-3 column">
      <button class="btn btn-default btn-sm service" value= "{{_id}}">{{serviceName}}</button>
    </div>
    {{/each}}
  </div>
</template>
